<div class="container mat-elevation-z8">
    <app-spinner></app-spinner>
    <router-outlet></router-outlet>
    <h1 class="full-width">Criando chamado</h1>
    <img class="full-width" src="assets/img/chamado-create.svg" alt="Chamado image">

    <form class="form">
        <mat-form-field class="full-width" appearance="outline">
            <mat-label>Título do chamado</mat-label>
            <input
                    [(ngModel)]="chamado.titulo"
                    name="titulo"
                    [formControl]="titulo"
                    required
                    matInput
                    placeholder="Ex. Trocar bateria de notebook">
        </mat-form-field>
    </form>

    <div class="status-prioridade">
        <mat-form-field appearance="outline">
            <mat-label>Selecione um status</mat-label>
            <mat-select
                    [(ngModel)]="chamado.status"
                    name="status"
                    [formControl]="status"
                    required
                    [disabled]="true"
                    (ngModelChange)="onStatusChange()">
                <mat-option value="0">EM ABERTO</mat-option>
                <mat-option value="1">EM ANDAMENTO</mat-option>
                <mat-option value="2">ENCERRADO</mat-option>
            </mat-select>
        </mat-form-field>

        <mat-form-field appearance="outline">
            <mat-label>Selecione uma prioridade</mat-label>
            <mat-select
                    [(ngModel)]="chamado.prioridade"
                    name="prioridade"
                    [formControl]="prioridade"
                    required>
                <mat-option value="0">BAIXA</mat-option>
                <mat-option value="1">MÉDIA</mat-option>
                <mat-option value="2">ALTA</mat-option>
            </mat-select>
        </mat-form-field>
    </div>

    <div class="tecnico">
        <mat-form-field class="full-width" appearance="outline">
            <mat-label>Selecione um técnico</mat-label>
            <input
                    matInput
                    [formControl]="tecnicoCtrl"
                    [matAutocomplete]="autoTecnico"
                    (input)="onTecnicoInput($event)"
                    placeholder="Digite o nome do técnico">
            <mat-autocomplete #autoTecnico="matAutocomplete">
                <mat-option *ngFor="let tec of tecnicosFiltrados" [value]="tec.nome">
                    {{ tec.nome }}
                </mat-option>
            </mat-autocomplete>
        </mat-form-field>
    </div>

    <div class="cliente">
        <mat-form-field class="full-width" appearance="outline">
            <mat-label>Selecione um cliente</mat-label>
            <input
                    matInput
                    [formControl]="clienteCtrl"
                    [matAutocomplete]="autoCliente"
                    (input)="onClienteInput($event)"
                    placeholder="Digite o nome do cliente">
            <mat-autocomplete #autoCliente="matAutocomplete">
                <mat-option *ngFor="let cli of clientesFiltrados" [value]="cli.nome">
                    {{ cli.nome }}
                </mat-option>
            </mat-autocomplete>
        </mat-form-field>
    </div>

    <div class="observacoes-container">
        <mat-form-field class="full-width" appearance="outline">
            <mat-label>Deixe uma observação</mat-label>
            <textarea
                    [(ngModel)]="novaObservacao"
                    name="novaObservacao"
                    [formControl]="observacaoCtrl"
                    matInput
                    placeholder="Ex. trocar bateria de notebook queimada..."
                    (input)="onObservacaoInput()"></textarea>
        </mat-form-field>
    </div>

    <button (click)="create()" [disabled]="!validaCampos()" class="full-width mat-elevation-z4" mat-raised-button
            color="primary">Salvar Chamado
    </button>
    <button routerLink="../" class="full-width mat-elevation-z4" mat-stroked-button color="warn">Cancelar</button>

    <p class="full-width">Desenvolvido por Luiz Generoso</p>
</div>
